#ifndef ___LIBGDF__
#define __LIBGDF__

RUN apt-get update && \\
    apt-get install -y --no-install-recommends \\
        libboost-all-dev && \\
    rm -rf /var/lib/apt/lists && \\
    mkdir /var/lib/apt/lists

RUN pip install cffi

RUN git clone --recursive "https://github.com/gpuopenanalytics/libgdf.git" /opt/libgdf && \\
    cd /opt/libgdf && \\
    mkdir build

RUN cd /opt/libgdf && \\
    sed -e 's/master/release-1.8.1/' < cmake/Templates/GoogleTest.CMakeLists.txt.cmake > ttt && \\
    mv ttt cmake/Templates/GoogleTest.CMakeLists.txt.cmake

RUN cd /opt/libgdf/build && \\
    cmake .. && \\
    make -j install && \\
    make copy_python && \\
    python setup.py install

RUN pip install llvmlite

RUN git clone "https://github.com/gpuopenanalytics/pygdf.git" /opt/pygdf && \\
    cd /opt/pygdf && \\
    python setup.py install

RUN git clone "https://github.com/gpuopenanalytics/dask_gdf" /opt/dask_gdf && \\
    cd /opt/dask_gdf && \\
    python setup.py install

RUN pip install pyarrow

#endif // __LIBGDF__
